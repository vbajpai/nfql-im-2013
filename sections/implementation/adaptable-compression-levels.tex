\begin{figure}[h!]
  \begin{center}
    \includegraphics* [width=0.9\linewidth]{zlevel}
    \caption{\texttt{z-level} Effect on Performance}
    \label{fig:engine-zlevel}
  \end{center}
\end{figure}

The engine uses the \texttt{zlib} \cite{rfc1950} software library to compress
the results written to the \texttt{flow-tools} files. \texttt{zlib} supports
$9$ compression levels with $9$ being the highest. \texttt{nfql} allows the
user to supply its desired choice of the compression level.  A default level
of $5$ is used for writes if a choice is not indicated.  Fig.
\ref{fig:engine-zlevel} shows the time taken to write a sample of records
passing the filter stage for each \texttt{z-level}. It goes to show that each
level adds its own performance overhead and must be used with discretion. It
is also important to note that other tools may use different compression
algorithms.  \texttt{nfdump} for instance, uses \texttt{lzo} \cite{lzo}
compression to trade space for faster compression and decompression.
